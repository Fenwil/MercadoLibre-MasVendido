"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function sortItems(){function t(t,n){fetch("https://api.mercadolibre.com/items/"+t).then(function(t){return t.json().then(function(t){return n(t.id,t.sold_quantity)})})}function n(){if(i.length===o.length/2){var t=r.slice().sort(function(t,n){return o[o.indexOf(t.firstElementChild.id)+1]-o[o.indexOf(n.firstElementChild.id)+1]}),n=document.querySelector(e);n.innerHTML=null,t.forEach(function(t){return n.insertAdjacentElement("afterbegin",t)})}}var e="#searchResults",r=[].concat(_toConsumableArray(document.querySelectorAll(".results-item"))),i=r.map(function(t){return t.innerHTML.match(/(MLA)[0-9]+/i)[0]}),o=[];i.forEach(function(e){t(e,function(t,e){o.push(t),o.push(e),n()})})}chrome.runtime.sendMessage("getState",function(t){t&&sortItems()});